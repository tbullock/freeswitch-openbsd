Freeswitch on OpenBSD
=====================

This is a shallow fork of Freeswitch for use on OpenBSD.

Reason
======

Freeswitch bundles almost all its dependancies inside its source tree, which is
a nightmare for packagers to work around.  Since OpenBSD and Freeswitch are 
important to me and my business, I am taking the time to build this.

As testament to how difficult it is to package Freeswitch, none of the major
linux distributions have made official packages.

Also at the time of writing, Freeswitch does not compile on OpenBSD, and I can
not possibly be bothered to replicate all the porting work that was done on
the dependencies to get them to 'work on OpenBSD' (yawn).

Point
=====

To make Freeswitch a first class citizen on OpenBSD and to eventually have a
real Freeswitch port included in OpenBSD.

Dependencies
============

We depend on the following OpenBSD ports:

aprutil-1
apr-1
curl
idn
pcre
srtp	
speex
speexdsp
iconv
intl
natpmp
miniupnpc
spandsp
<more to follow as work progresses>

Additionally, FreeSWITCH depends on sqlite3 which is a system library on
OpenBSD. See problems below regarding this.

Building
========

Install the list of dependencies

Installation from source should be as simple as:

> make && make install

Proviso: Until the porting work is actually complete the previous command is
basically a fantasy.

Problems
========

- if HAVE_SETRLIMIT is defined we crash and burn instantly
- mime.types is hard coded
	- What else is hard coded?
	- ideally we should point at freeswitch.xml and it should specify
	- wtf is a softswitch doing loading a giant list of mime types
		- Can we not just specify the couple it needs by hand?
- According to FreeSWITCH developers, the in-tree version of sqlite is heavily
  modified to the point where it does not look like upstream sqlite. This may
  prove to be a major problem for this project in that, to use the in-tree
  version may require a dedicated porting effort to introduce OpenBSD specific
  changes just to make that one library function properly.


Things to do
============

- Current launcher (switch.c) is pretty heavy (1000+ lines), perhaps re-write it
	- Launcher should do only this (more or less):
		- Load freeswitch.xml (or user specified equivalent)
		- Setup signal handling
		- Daemonize

Criticisms
==========

- Configuration is loaded by directories? Can we not just specify freeswitch.xml
- Configuration is really heavy. A scan of the vanilla config folder from
  the source tree shows there are 248 items weighing a heafty 667.5 kB.
- Launcher doesn't appear to use getopt for some reason?